version: '3.1'

services:

  api:
    image: wesleymime/finances-api
    restart: always
    ports:
      - 80:8080
    depends_on:
      - db
    entrypoint: ["java","-Dspring.profiles.active=prod","-Dpostgres_url=db:5432/CHANGEDB","-Dpostgres_username=CHANGEUSR","-Dpostgres_password=CHANGEPWD","-Djwt_secret=CHANGEJWT","-jar","/app.jar"]

  db:
    image: postgres
    restart: always
    environment:
      POSTGRES_PASSWORD: CHANGEPWD